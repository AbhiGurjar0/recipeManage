<html>

<head>
    <meta charset="utf-8" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <style type="text/tailwindcss">
        :root {
        --primary-50: #fff7ed;
        --primary-100: #ffedd5;
        --primary-200: #fed7aa;
        --primary-300: #fdba74;
        --primary-400: #fb923c;
        --primary-500: #f97316;
        --primary-600: #ea580c;
        --primary-700: #c2410c;
        --primary-800: #9a3412;
        --primary-900: #7c2d12;
        --secondary-50: #f0fdf4;
        --secondary-100: #dcfce7;
        --secondary-200: #bbf7d0;
        --secondary-300: #86efac;
        --secondary-400: #4ade80;
        --secondary-500: #22c55e;
        --secondary-600: #16a34a;
        --secondary-700: #15803d;
        --secondary-800: #166534;
        --secondary-900: #14532d;
        --neutral-50: #fafaf9;
        --neutral-100: #f5f5f4;
        --neutral-200: #e7e5e4;
        --neutral-300: #d6d3d1;
        --neutral-400: #a8a29e;
        --neutral-500: #78716c;
        --neutral-600: #57534e;
        --neutral-700: #44403c;
        --neutral-800: #292524;
        --neutral-900: #1c1917;
      }
    </style>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <title>Recipe Management and Sharing Platform</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon" />
</head>

<body class="bg-primary-50" style='font-family: "Work Sans", sans-serif;'>
    <div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col">
            <div class="w-full h-[10vh]">
                <%- include('partials/navbar') %>
            </div>
            <main class="flex-1 px-4 sm:px-6 lg:px-8 py-8">
                <div class="max-w-7xl mx-auto">
                    <div class="text-center mb-8">

                        <p class="mt-2 text-lg text-neutral-600 max-w-2xl mx-auto"> Search Result for your query.
                        </p>
                    </div>
                    <form id="filterForm" method="get" action="/user/search" class="mb-6 flex flex-wrap gap-4">
                        <input type="text" name="ingredient" placeholder="Ingredient" />
                        <input type="text" name="category" placeholder="Category" />
                        <input type="number" name="minPrice" placeholder="Min Price" />
                        <input type="number" name="maxPrice" placeholder="Max Price" />
                        <button type="submit">Filter</button>
                    </form>

                    <div id="recipesContainer"></div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                        <% recipe.forEach(function(product) { %>

                            <div
                                class="bg-white shadow-lg rounded-xl overflow-hidden border w-[45vw] sm:w-[30vw] md:w-[17vw] box-border md:h-[45vh]">
                                <a href="/recipe/<%=product._id%>">

                                    <% if (product.images && product.images.length> 0) { %>
                                        <img src="data:image/jpeg;base64,<%= product.images[0].toString('base64') %>"
                                            class="w-full h-40 sm:h-60 rounded-lg object-cover object-center" />
                                        <% } else { %>
                                            <p>No images available for this product.</p>
                                            <% } %>
                                                <div class="md:p-4 p-2">
                                                    <h2 class=" capitalize font-bold text-lg text-nowrap">
                                                        <%=product.title%>
                                                    </h2>
                                                    <p
                                                        class="py-[1px] px-2 text-sm capitalize bg-zinc-100 rounded-xl inline-block">
                                                        <%=product.category%>
                                                    </p>
                                                    <p class="text-sm text-gray-500">By Padmavati Jewels</p>
                                                    <div class="flex justify-around  flex-wrap items-center mt-3">

                                                        <span class="text-purple-200 text-md line-through">â‚¹
                                                            <%=product.price%>
                                                        </span>


                                                    </div>

                                                </div>

                                </a>

                            </div>
                            <% }) %>
                    </div>

                </div>
            </main>
        </div>
    </div>

</body>
<script>
    // document.getElementById('filterForm').addEventListener('submit', async (e) => {
    //     e.preventDefault();

    //     const formData = new FormData(e.target);
    //     const params = new URLSearchParams();

    //     for (const [key, value] of formData.entries()) {
    //         if (value) params.append(key, value);
    //     }
    //     console.log(params.toString());

    //     const response = await fetch("/user/search?" + params.toString())

    //     const data = await response.json();

    //     const container = document.getElementById('recipesContainer');
    //     container.innerHTML = '';

    //     if (data.recipes.length === 0) {
    //         container.innerHTML = '<p>No recipes found.</p>';
    //     } else {
    //         data.recipes.forEach(recipe => {
    //             const div = document.createElement('div');
    //             div.classList.add('recipe-card', 'p-4', 'border', 'rounded', 'mb-4');
    //             div.innerHTML = `
    //             <h2 class="text-xl font-bold">${recipe.title}</h2>
    //             <p>Price: ${recipe.price}</p>
    //             <p>Category: ${recipe.category}</p>
    //             <p>Ingredients: ${recipe.ingredients}</p>
    //         `;
    //             container.appendChild(div);
    //         });
    //     }
    // });

</script>

</html>